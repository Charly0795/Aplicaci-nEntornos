DROP TABLE CENTRO cascade constraints;
DROP TABLE CICLO cascade constraints;
DROP TABLE CICLO_CENTRO cascade constraints;
DROP TABLE GRUPO cascade constraints;
DROP TABLE ESTUDIANTE cascade constraints;
DROP TABLE GRUPO_ESTUDIANTE cascade constraints;
DROP TABLE EMPRESA cascade constraints;
DROP TABLE TUTOR cascade constraints;
DROP TABLE REALIZA_PRACTICAS cascade constraints;
DROP TABLE ESTUDANTE_TUTOR cascade constraints;
DROP TABLE USERS cascade constraints;



CREATE TABLE CENTRO (
  COD_CENTRO NUMBER(10) PRIMARY KEY,
  DEN_CENTRO VARCHAR(50) NOT NULL ,
  DIRECCION_CENTRO VARCHAR(50),
  NIF_CENTRO VARCHAR(9) NOT NULL,
  NOMB_REPR VARCHAR(50),
  DNI_REPR VARCHAR(9),
  DIRECTOR_CENTRO VARCHAR(50),
  LOC_CENTRO VARCHAR(50),
  MUN_CENTRO VARCHAR(50),
  PROV_CENTRO VARCHAR(30),
  CP_CENTRO NUMBER(5),
  DAT_CENTRO VARCHAR(50)
);

INSERT INTO CENTRO VALUES ('1234','CENTRO PROFESIONAL EUROPEO','CALLE TAJO 1','1234567','PEPE','1234567','ANA','VILLAVICIOSA DE ODÓN','VILLAVICIOSA','MADRID','28670','123');
INSERT INTO CENTRO VALUES ('4321','CENTRO PROFESIONAL EUROPEO','CALLE INVENTADA','1234567','PEPA','1234567','LUIS','ALCOBENDAS','ALCOBENDAS','MADRID','28042','321');

COMMIT;


CREATE TABLE CICLO (
	CLAVE_CICLO NUMBER (10) PRIMARY KEY,
  NOM_CICLO VARCHAR(50) NOT NULL,
  CLAVE_FAM NUMBER(10) NOT NULL,
  NOM_FAM VARCHAR(50) NOT NULL
);

INSERT INTO CICLO VALUES ('1234','DESARROLLO DE APLICACIONES MULTIPLATAFORMA','123','INGENIERIA');
INSERT INTO CICLO VALUES ('4321','ADMINISTRACION DE SISTEMAS EN RED','123','INGENIERIA');
INSERT INTO CICLO VALUES ('5678','ANIMACIÓN EN ACTIVIDADES FÍSICAS Y DEPORTIVAS','321','DEPORTE');
INSERT INTO CICLO VALUES ('8765','ADMINISTRACION Y FINANZAS','456','EMPRESA');
COMMIT;

CREATE TABLE CICLO_CENTRO (
  COD_CENTRO NUMBER(10),
  CLAVE_CICLO NUMBER (10),
  CONSTRAINT cicloc_fk FOREIGN KEY (CLAVE_CICLO) REFERENCES CICLO (CLAVE_CICLO),
  CONSTRAINT centro_fk FOREIGN KEY (COD_CENTRO) REFERENCES CENTRO (COD_CENTRO)
);

INSERT INTO CICLO_CENTRO VALUES ('1234','1234');
INSERT INTO CICLO_CENTRO VALUES ('1234','4321');
INSERT INTO CICLO_CENTRO VALUES ('1234','5678');
INSERT INTO CICLO_CENTRO VALUES ('1234','8765');
COMMIT;


CREATE TABLE GRUPO (
  COD_GRUPO NUMBER(10) PRIMARY KEY,
  CLAVE_CICLO NUMBER(10) NOT NULL,
  CONSTRAINT ciclo_fk FOREIGN KEY (CLAVE_CICLO) REFERENCES CICLO (CLAVE_CICLO)
);

INSERT INTO GRUPO VALUES ('1','1234');
INSERT INTO GRUPO VALUES ('2','1234');
INSERT INTO GRUPO VALUES ('3','4321');
INSERT INTO GRUPO VALUES ('4','5678');
COMMIT;


CREATE TABLE ESTUDIANTE (
  NUM_MAT NUMBER(10) PRIMARY KEY,
  NOM VARCHAR(30) NOT NULL,
  APELL1 VARCHAR(30) NOT NULL,
  APELL2 VARCHAR(30),
  DNI VARCHAR(9) NOT NULL UNIQUE
);

INSERT INTO ESTUDIANTE VALUES ('21748226','CARLOS','RUIZ','VILLALMANZO','5033');
INSERT INTO ESTUDIANTE VALUES ('21748225','IVÁN','DE CASTRO','CABALLERO','12345');
INSERT INTO ESTUDIANTE VALUES ('21748224','ALEJANDRO','MORENO','PARÍS','123456');
INSERT INTO ESTUDIANTE VALUES ('21748223','ANTONIO','MANCHEÑO','CORTÉS','1234567');
COMMIT;


CREATE TABLE GRUPO_ESTUDIANTE (
  COD_GRUPO NUMBER(10) NOT NULL,
  NUM_MAT NUMBER(10) NOT NULL,
  ANO_ACADEM VARCHAR(30) NOT NULL,
  CONSTRAINT grupo_fk FOREIGN KEY (COD_GRUPO) REFERENCES GRUPO (COD_GRUPO),
  CONSTRAINT matric_fk FOREIGN KEY (NUM_MAT) REFERENCES ESTUDIANTE (NUM_MAT)
);

INSERT INTO GRUPO_ESTUDIANTE VALUES ('1','21748226','2018/19');
INSERT INTO GRUPO_ESTUDIANTE VALUES ('1','21748225','2018/19');
INSERT INTO GRUPO_ESTUDIANTE VALUES ('1','21748224','2018/19');
INSERT INTO GRUPO_ESTUDIANTE VALUES ('1','21748223','2018/19');
COMMIT;

CREATE TABLE EMPRESA (
  NUM_CONV NUMBER(10) PRIMARY KEY,
  NOM_EMPR VARCHAR(30) NOT NULL,
  F_FIRMA DATE NOT NULL,
  LOCALIDAD VARCHAR(100) NOT NULL,
  DIRECCION VARCHAR(500) NOT NULL,
  REPR_EMPR VARCHAR(50)
);

INSERT INTO EMPRESA VALUES ('1234','GOOGLE',TO_DATE('11/11/2017'),'MADRID','CALLE INVENTADA','PEPE');
INSERT INTO EMPRESA VALUES ('4321','MICROSOFT',TO_DATE('11/11/2017'),'MADRID','CALLE INVENTADA','PEPE');
INSERT INTO EMPRESA VALUES ('5678','APPLE',TO_DATE('11/11/2017'),'MADRID','CALLE INVENTADA','PEPE');
INSERT INTO EMPRESA VALUES ('8765','EL CHINO DE MI BARRIO',TO_DATE('11/11/2017'),'MADRID','CALLE INVENTADA','PEPE');
COMMIT;


CREATE TABLE TUTOR (
  NIF_TUTOR VARCHAR(9) PRIMARY KEY,
  NOM VARCHAR(30) NOT NULL,
  APELL1 VARCHAR(30) NOT NULL,
  APELL2 VARCHAR(30)
);
INSERT INTO TUTOR VALUES ('1234','PEDRO JESUS','CAMACHO','ORTEGA');
INSERT INTO TUTOR VALUES ('4321','PEPE','PEREZ','GARCÍA');
INSERT INTO TUTOR VALUES ('5678','LUIS','GARCÍA','PEREZ');
INSERT INTO TUTOR VALUES ('8765','MARIA','ALONSO','NAVARRO');
COMMIT;

CREATE TABLE REALIZA_PRACTICAS (
NUM_MAT NUMBER(10) NOT NULL,
NUM_CONV NUMBER(10) NOT NULL,
FECHA_INICIO DATE NOT NULL,
FECHA_FIN DATE NOT NULL,
TUTOR_EMP VARCHAR(30) NOT NULL,
HORARIO VARCHAR(30) NOT NULL,
LOCALIZACIÓN VARCHAR(50) NOT NULL,
ERASMUS VARCHAR(50),
ESTADO VARCHAR(30) NOT NULL,
  CONSTRAINT mat_fk FOREIGN KEY (NUM_MAT) REFERENCES ESTUDIANTE (NUM_MAT),
  CONSTRAINT conv_fk FOREIGN KEY (NUM_CONV) REFERENCES EMPRESA (NUM_CONV)
);

INSERT INTO REALIZA_PRACTICAS VALUES ('21748226','1234',TO_DATE('4/23/2019'),TO_DATE('7/30/2019'),'PEPE','9:00H-17:00H','MADRID','NO','OK');
INSERT INTO REALIZA_PRACTICAS VALUES ('21748225','1234',TO_DATE('4/23/2019'),TO_DATE('7/30/2019'),'PEPE','9:00H-17:00H','MADRID','NO','OK');
INSERT INTO REALIZA_PRACTICAS VALUES ('21748224','1234',TO_DATE('4/23/2019'),TO_DATE('7/30/2019'),'PEPE','9:00H-17:00H','MADRID','NO','OK');
INSERT INTO REALIZA_PRACTICAS VALUES ('21748223','1234',TO_DATE('4/23/2019'),TO_DATE('7/30/2019'),'PEPE','9:00H-17:00H','MADRID','NO','OK');
COMMIT;

CREATE TABLE ESTUDANTE_TUTOR (
  NUM_MAT NUMBER(10) NOT NULL,
  NIF_TUTOR VARCHAR(9) NOT NULL,
  CONSTRAINT est_fk FOREIGN KEY (NUM_MAT) REFERENCES ESTUDIANTE (NUM_MAT),
  CONSTRAINT tutor_fk FOREIGN KEY (NIF_TUTOR) REFERENCES TUTOR (NIF_TUTOR)
);

INSERT INTO ESTUDANTE_TUTOR VALUES ('21748226','1234');
INSERT INTO ESTUDANTE_TUTOR VALUES ('21748225','1234');
INSERT INTO ESTUDANTE_TUTOR VALUES ('21748224','1234');
INSERT INTO ESTUDANTE_TUTOR VALUES ('21748223','1234');
COMMIT;

CREATE TABLE USERS (
 USR  VARCHAR(30) PRIMARY KEY ,
 PWD  VARCHAR(30) NOT NULL,
 TIPO VARCHAR(30) NOT NULL
 );
 

INSERT INTO USERS VALUES ('Carlos','1234','ADMIN');
INSERT INTO USERS VALUES ('Pedro','4321', 'TUTOR');
INSERT INTO USERS VALUES ('Ana','1234', 'DIRECTOR');

COMMIT;



